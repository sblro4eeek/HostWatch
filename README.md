# üñ•Ô∏è HostWatch

---

> ‚ö° –õ—ë–≥–∫–∏–π CLI –∏ HTTP-—Å–µ—Ä–≤–∏—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è ¬´—Å–Ω–∏–º–∫–∞¬ª —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ö–æ—Å—Ç–∞: RAM/Swap, –¥–∏—Å–∫–∏, –¥–∞—Ç—á–∏–∫–∏ (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã) –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –¥–µ—Ç–∞–ª–∏. –ü–æ–¥—Ö–æ–¥–∏—Ç –∫–∞–∫ —É—Ç–∏–ª–∏—Ç–∞ ¬´–ø–æ –∑–∞–ø—Ä–æ—Å—É¬ª –∏ –∫–∞–∫ –º–∞–ª–µ–Ω—å–∫–∏–π –∞–≥–µ–Ω—Ç c –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –º–µ—Ç—Ä–∏–∫.

---

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
- [‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
- [üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [üåê HTTP API](#http-api)
- [ü™µ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ](#–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏](#-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
- [üìú –õ–∏—Ü–µ–Ω–∑–∏—è](#–ª–∏—Ü–µ–Ω–∑–∏—è)

---

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üåê **HTTP API**: —ç–Ω–¥–ø–æ–∏–Ω—Ç `/get_info` —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å–Ω–∞–ø—à–æ—Ç–æ–º (—Ñ–æ–Ω–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ).
- üß† **–ö—ç—à –º–µ—Ç—Ä–∏–∫**:: —Ñ–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ —Ä–∞–∑ –≤ N —Å–µ–∫—É–Ω–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 2s).
- üß± **–ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å**: –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ (tower-http Trace), –∫–æ–º–ø—Ä–µ—Å—Å–∏—è, —Ç–∞–π–º–∞—É—Ç—ã, graceful shutdown (Ctrl+C, SIGTERM).
- üß© **–ß–∏—Å—Ç—ã–µ —Ç–∏–ø—ã –¥–æ–º–µ–Ω–∞** ‚Äî –µ–¥–∏–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è CLI/HTTP.

---

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- ü¶Ä Rust **1.75+**

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```
git clone https://github.com/sblro4eeek/HostWatch.git
cd hostwatch

# —Å–±–æ—Ä–∫–∞ —Ä–µ–ª–∏–∑–Ω–æ–π –≤–µ—Ä—Å–∏–∏
cargo build --release
# –±–∏–Ω–∞—Ä—å: target/release/hostwatch

```
### üì¶ –ö–∞–∫ –±–∏–Ω–∞—Ä—å
–ü–æ—Å–ª–µ `cargo build --release` –±–∏–Ω–∞—Ä—å –ª–µ–∂–∏—Ç –≤ `target/release/hostwatch`.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
### üåê HTTP —Ä–µ–∂–∏–º
```
# –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –Ω–∞ 8080
cargo run -- serve --port 8080

# –ø–æ–ª—É—á–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏
curl -s http://127.0.0.1:8080/get_info | jq .
```

### üìä –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:
```
{
  "system": {
    "name": "Linux",
    "kernel_version": "6.8.0-xyz",
    "os_version": "Ubuntu 24.04",
    "host_name": "my-host"
  },
  "memory": {
    "total_ram_gb": 31.25,
    "total_ram_mb": 32000.0,
    "used_ram_gb": 12.42,
    "used_ram_mb": 12715.5,
    "ram_percent": 39.8,
    "total_swap_gb": 2.0,
    "total_swap_mb": 2048.0,
    "used_swap_gb": 0.0,
    "used_swap_mb": 0.0,
    "swap_percent": 0.0
  },
  "disks": [
    {
      "name": "nvme0n1p2",
      "mount_point": "/",
      "available_space_gb": 123.45,
      "available_space_mb": 126412.8,
      "total_space_gb": 476.94,
      "total_space_mb": 488386.6
    }
  ],
  "components": [
    { "label": "CPU (Tctl)", "temperature": 54.0 }
  ]
}
```
> –ó–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏–º–µ—Ä–Ω—ã–µ; –Ω–∞–±–æ—Ä –ø–æ–ª–µ–π –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–º–∏.

---

## üåê HTTP API
### `GET /get_info`
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `HostStats`. –ö—ç—à –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã.

üì° –ö–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤:
- ‚úÖ `200 OK` ‚Äî —É—Å–ø–µ—à–Ω—ã–π —Å–Ω–∏–º–æ–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è

üì¶ –ó–∞–≥–æ–ª–æ–≤–∫–∏:

- `Content-Encoding: gzip/br/zstd `‚Äî –µ—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç (–≤–∫–ª—é—á–µ–Ω–∞ –∫–æ–º–ø—Ä–µ—Å—Å–∏—è)
- `Content-Type: application/json; charset=utf-8`
---

## ü™µ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `tracing` + `tower_http::trace`
–ü—Ä–∏–º–µ—Ä—ã:
```
RUST_LOG=info cargo run --port 8080
RUST_LOG=tower_http=info,hostwatch=debug cargo run
```
> üõ†Ô∏è –°—Ä–µ–¥—Å—Ç–≤–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –≤ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è; —Ñ–æ—Ä–º–∞—Ç ‚Äî –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π, –ø—Ä–∏–≥–æ–¥–Ω—ã–π –¥–ª—è grep/–∂—É—Ä–Ω–∞–ª–æ–≤.

---

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

| üìö –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞             | üîñ –í–µ—Ä—Å–∏—è  | üõ†Ô∏è –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                    |
|-------------------------|---------|-----------------------------------------------|
| [axum](https://crates.io/crates/axum)               | `0.8.4`   | HTTP-—Å—Ç–µ–∫ (—Ä–æ—É—Ç–∏–Ω–≥, —Å–µ—Ä–≤–µ—Ä)                   |
| [tokio](https://crates.io/crates/tokio)             | `1.47.1`     | Async runtime                                 |
| [tokio-util](https://crates.io/crates/tokio-util)   | `0.7.16`   | –î–æ–ø. —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è Tokio (CancellationToken –∏ –¥—Ä.) |
| [tower](https://crates.io/crates/tower)             | `0.5.2`   | –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π (–æ—Å–Ω–æ–≤–∞ –¥–ª—è middleware)        |
| [tower-http](https://crates.io/crates/tower-http)   | `0.6.6`   | Middleware (CORS, trace, compression, timeout)|
| [sysinfo](https://crates.io/crates/sysinfo)         | `0.37`  | –°–±–æ—Ä —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ (CPU, RAM, –¥–∏—Å–∫–∏, —Å–µ–Ω—Å–æ—Ä—ã) |
| [clap](https://crates.io/crates/clap)               | `4.5.48`     | CLI-–ø–∞—Ä—Å–µ—Ä –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤                         |
| [serde](https://crates.io/crates/serde)             | `1.0.226`     | –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è                   |
| [serde_json](https://crates.io/crates/serde_json)   | `1.0.225`     | –†–∞–±–æ—Ç–∞ —Å JSON                                 |
| [tracing](https://crates.io/crates/tracing)         | `0.1.41`   | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞                     |
| [tracing-subscriber](https://crates.io/crates/tracing-subscriber) | `0.3.20` | –ü–æ–¥–ø–∏—Å—á–∏–∫–∏ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–æ–≤             |
| [anyhow](https://crates.io/crates/anyhow)           | `1.0.100`     | –£–¥–æ–±–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –æ—à–∏–±–∫–∞–º–∏                     |

---

## üìú License

[MIT](https://opensource.org/licenses/MIT)